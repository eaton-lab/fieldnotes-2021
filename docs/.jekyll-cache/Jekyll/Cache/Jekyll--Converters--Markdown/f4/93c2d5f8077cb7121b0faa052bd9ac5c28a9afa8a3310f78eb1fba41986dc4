I"ä*<style>
h2 {
    margin-top: 30px;
}
h3 {
    margin-top: 30px;
}
pre {
    line-height: 1.25em;
}
pre code {
    font-size: 0.9em;
}
</style>

<h3 id="git-conflicts">Git conflicts</h3>
<p>Git conflicts arise when changes to a repo are committed from two or more
different locations. This is usually a result of two developers collaborating
on the same code, but it can also arise when a single person is comitting 
changes to a repo, for example, if they commit changes both locally on their
laptop and remotely through the GitHub website.</p>

<h3 id="what-does-a-conflict-look-like">What does a conflict look like?</h3>
<p>Let‚Äôs walk through an example using the repo <code class="language-plaintext highlighter-rouge">https://github.com/hackers-test/hack-program</code>. To keep things simple for now, we will make a conflict arise 
in the README file, caused by making a change to the same line both on my 
laptop and on GitHub.</p>

<p>First, I opened my browser to the repo linked to above and clicked on the 
pen icon on the README file to edit it directly online. On the third line
of the README I then entered the text ‚ÄúCommitted from GitHub‚Äù and committed
the change.</p>

<p>Next, I opened my local clone of the repo in my terminal. Here I also made
a change to the same README.md file, entering on the third line the text
‚ÄúCommitted from local‚Äù. I then committed and tried to push the change.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add README.md
git commit <span class="nt">-m</span> <span class="s2">"..."</span>
git push
</code></pre></div></div>
<pre style="padding:10px; border: solid black">(base) 
To https://github.com/hackers-test/hack-program.git
 <font color="#CC0000">! [rejected]       </font> main -&gt; main (fetch first)
<font color="#CC0000">error: failed to push some refs to &apos;https://github.com/hackers-test/hack-program.git&apos;</font>
<font color="#C4A000">hint: Updates were rejected because the remote contains work that you do</font>
<font color="#C4A000">hint: not have locally. This is usually caused by another repository pushing</font>
<font color="#C4A000">hint: to the same ref. You may want to first integrate the remote changes</font>
<font color="#C4A000">hint: (e.g., &apos;git pull ...&apos;) before pushing again.</font>
<font color="#C4A000">hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details.</font>
</pre>

<p>As you can see, we cannot push to the remote repo because it is currently one
or more commits ahead of our current branch. This actually doesn‚Äôt yet mean 
that there is a conflict, but it means that we need to <em>check</em> for a conflict
by following the instructions, which tell us to perform a <code class="language-plaintext highlighter-rouge">git pull</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div></div>
<pre style="padding: 10px; border: black solid">
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.
</pre>

<p>This tells us that there is a conflict, and that is occurs in the README.md
file, and tells us that we need to fix it. So how do we do that?</p>

<h3 id="resolving-conflicts">Resolving conflicts</h3>
<p>When you made the <code class="language-plaintext highlighter-rouge">git pull</code> request above you accepted the changes from the 
remote main branch into your local main branch. Often people might create a
separate branch in which to pull these changes to ensure that you do not mess
up your main. Here we‚Äôre taking a lazier approach. The message above told us
which files contain conflicts, so let‚Äôs take a look at that file. What we 
will find is a conflict represented by text that has been inserted into our
code like the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Committed by Local.
=======
Committed by GitHub.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; af4e39e325cf414f268a0b75f41e1ff72a29322b
</code></pre></div></div>

<p>To understand this we first need to revisit some naming conventions from git. 
The term <code class="language-plaintext highlighter-rouge">HEAD</code> refers to the latest committed state of your current branch. 
Thus, anything in the section between <code class="language-plaintext highlighter-rouge">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> and <code class="language-plaintext highlighter-rouge">=======</code> represents
the code that was entered in our local repo. Alternatively, the code between 
<code class="language-plaintext highlighter-rouge">======</code> and <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;&gt;&gt;&gt;&gt; ...</code> is code that was entered on the remote ‚Äì the code
we pulled in from somewhere else. The name of that commit is much uglier, in 
this case <code class="language-plaintext highlighter-rouge">af4e39e325cf414f268a0b75f41e1ff72a29322b</code>. This is just a random
hash value that is a unique signature of that specific commit. As you can 
see then, the format of a file that contains a conflict is to show both versions
of the code separated by the <code class="language-plaintext highlighter-rouge">=======</code> delimiter. Your job as the resolver is
to select which version of the code you want to keep.</p>

<p>To do this you can simply open the file in your favorite text editor. You must
remote the lines with arrows and the delimiter, and then leave just the code
you want to keep. So from the block above I would keep only the following 
after editing it. In this case you can see that I decided to keep a solution
that showed changes from both contributors.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Committed by Local &amp; GitHub.
</code></pre></div></div>

<p>Finally, you can now push your changes and they are ensured not to conflict
with any other changes on the remote, since you already pulled in and merged
all of the changes that were present on the remote.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add README.md
git commit -m "resolved conflict"
git push
</code></pre></div></div>

<h3 id="when-there-is-no-conflict">When there is NO conflict?</h3>
<p>Although conflicts can arise, they are not inevitable. Two users can edit code
at the same time and as long as they do not edit the exact same lines of code
their commits can be merged without any conflicts at all. As an example, let‚Äôs
say you accepted the pull request from another user on GitHub and merged their
commits into main. Then, like in the example above, you later try to push some
new commits from your local branch. Again, git will tell you that you cannot
push because the remote is ahead of you, and so you need to first do a git pull.
When you do the <code class="language-plaintext highlighter-rouge">git pull</code> this time, because there are no conflicts, it will
simply print a summary for you showing which files have been changed:</p>

<pre style="padding: 10px; border: solid grey">
remote: Enumerating objects: 16, done.
remote: Counting objects: 100% (16/16), done.
remote: Compressing objects: 100% (12/12), done.
remote: Total 12 (delta 6), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (12/12), 2.94 KiB | 601.00 KiB/s, done.
From github.com:eaton-lab/hack-the-planet
   df5c59a..c449dfd  master     -&gt; origin/master
Merge made by the &apos;recursive&apos; strategy.
 README.md | 4 <font color="#4E9A06">++</font><font color="#CC0000">--</font>
 1 file changed, 2 insertions(+), 2 deletions(-)
</pre>

<p>Your files have been updated and no conflict characters (e.g., <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;&gt;</code>) 
were inserted, only the merged commits.</p>

<h3 id="other-places-conflicts-arise">Other places conflicts arise</h3>
<p>In our first example a conflict was identified when we tried to perform a 
<code class="language-plaintext highlighter-rouge">git push</code> from local, where git informed us that the remote already had 
merged commits that would cause a conflict. In other words, the other user
beat us to the punch and made changes first. But what if it had been the other
way around, and we pushed commits from local before the other user made their
pull request. In that case both users will see a message on GitHub telling
them that the new pull request contains conflicts and cannot be merged until
they are resolved.</p>

<p>There is an option to resolve these conflicts using the interactive editor
in GitHub, which is an easy option. But for more complex coding changes we‚Äôll
use the terminal. Here the owner of the repo will pull in the changes from the
pull request branch using <code class="language-plaintext highlighter-rouge">git pull origin pull/{number}/head</code>. To ensure
we do not mess up our main branch I usually do this on a separate branch, 
which we first create using <code class="language-plaintext highlighter-rouge">git checkout -b {any name}</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># checkout a new branch</span>
git checkout <span class="nt">-b</span> hotfix

<span class="c"># merge pull request into this branch -- any conflict will arise</span>
git pull origin pull/1/head

<span class="c"># edit to resolve conflicts</span>
<span class="c"># ...</span>

<span class="c"># test your code with these new changes</span>
<span class="c"># ...</span>

<span class="c"># swith to main and merge hotfix branch into main</span>
git checkout main
git merge hotfix

<span class="c"># commit changes back to GitHub -- this will close the PR</span>
<span class="c"># since the PR branch will become identical to main.</span>
git add README.md
git commit <span class="nt">-m</span> <span class="s2">"resolved conflict with PR #1"</span>
git push origin main
</code></pre></div></div>

<h3 id="this-seems-complicated">This seems complicated</h3>
<p>It is! It takes a long time to get comfortable with <code class="language-plaintext highlighter-rouge">git</code> to the level that 
you memorize the order in which to call all of these commands. Fortunately, 
there are hundreds of tutorials like this one around the web that you can 
search to help you whenever you have a question. Revisit them as often as you
need, and remember, <code class="language-plaintext highlighter-rouge">git</code> is a time machine, you can always rewind to former
committed state, so don‚Äôt worry if you think you‚Äôve totally broken your repo.
Seek help if you get stuck, and you‚Äôll figure it out.</p>
:ET